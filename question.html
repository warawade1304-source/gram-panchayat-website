<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§µ‡§≤‡•Ä | ‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§µ‡§∞‡§µ‡§°‡•á</title>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8;}
.top-header{text-align:center;padding:20px;font-size:26px;font-weight:bold;
background:linear-gradient(to right,#ff9933,#fff,#138808);}
.menu{display:flex;justify-content:center;flex-wrap:wrap;background:#003f7f;}
.menu a{color:#fff;padding:12px 16px;text-decoration:none;font-weight:bold;}
.container{max-width:1200px;margin:20px auto;background:#fff;padding:20px;border-radius:10px;}

.question-top-nav{display:flex;gap:6px;overflow-x:auto;padding:10px;background:#eef3ff;border-radius:8px;}
.q-circle{
  min-width:36px;height:36px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:bold;cursor:pointer;
  border:3px solid #999;
}
.q-circle.active{outline:3px solid #000;}

.mark-0{background:#dc2626;color:#fff;}
.mark-low{background:#f97316;color:#fff;}
.mark-mid{background:#facc15;color:#000;}
.mark-full{background:#16a34a;color:#fff;}

.question-card{border-left:5px solid #003f7f;background:#f9fafb;padding:15px;border-radius:8px;}

.proofs img{
  max-width:220px;
  margin:6px;
  border-radius:8px;
  cursor:pointer;
  transition:.2s;
}
.proofs img:hover{transform:scale(1.05);}

/* LIGHTBOX */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.lightbox img{max-width:90%;max-height:85%;border-radius:10px;}
.lb-btn{
  position:absolute;
  color:#fff;
  font-size:34px;
  cursor:pointer;
  user-select:none;
}
.lb-close{top:20px;right:30px;}
.lb-prev{left:20px;}
.lb-next{right:20px;}

.nav-btns{display:flex;justify-content:space-between;margin-top:15px;}
button{padding:10px 18px;border:none;background:#003f7f;color:#fff;border-radius:6px;}
</style>
</head>

<body>

<div class="top-header">üìÑ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§‡§∞‡§æ‡§ú ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§µ‡§≤‡•Ä - ‡§µ‡§∞‡§µ‡§°‡•á</div>

<div class="menu">
  <a href="index.html">‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡§æ‡§®</a>
  <a href="panch-info.html">‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§‡•Ä‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</a>
  <a href="documents.html">‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§Ø‡•ã‡§ú‡§®‡§æ</a>
  <a href="notices.html">‡§®‡•ã‡§ü‡•Ä‡§∏ ‡§¨‡•ã‡§∞‡•ç‡§°</a>
  <a href="question.html">‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•Ç‡§ö‡•Ä</a>
  <a href="gallery.html">‡§´‡•ã‡§ü‡•ã ‡§ó‡•Ö‡§≤‡§∞‡•Ä</a>
  <a href="tax.html">‡§Æ‡§æ‡§≤‡§Æ‡§§‡•ç‡§§‡§æ ‡§ï‡§∞</a>
  <a href="contact.html">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</a>
</div>

<div class="container">
  <div id="questionNav" class="question-top-nav"></div>
  <div id="questionArea"></div>

  <div class="nav-btns">
    <button id="prevBtn">Previous</button>
    <button id="nextBtn">Next</button>
  </div>
</div>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox">
  <span class="lb-btn lb-close" onclick="closeLB()">‚úñ</span>
  <span class="lb-btn lb-prev" onclick="prevPhoto()">‚ùÆ</span>
  <img id="lbImg">
  <span class="lb-btn lb-next" onclick="nextPhoto()">‚ùØ</span>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

<script>
/* ===== CONFIG ===== */
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTcFT9M0fQK1TI1FgzTwUTTmK5CIsA7yK5zXPSoZ0SkjzGtuDmyKhvaXjPedNlnHy8zCWGRyNIwj7WU/pub?output=csv";

/* ===== DOM ===== */
const questionNav = document.getElementById("questionNav");
const questionArea = document.getElementById("questionArea");
const nextBtn = document.getElementById("nextBtn");
const prevBtn = document.getElementById("prevBtn");
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lbImg");

/* ===== DATA ===== */
let questions = [];
let current = 0;
let photos = [];
let photoIndex = 0;

/* ===== FUNCTIONS ===== */
function markClass(v){
  v = Number(v) || 0;
  if(v === 0) return "mark-0";
  if(v <= 50) return "mark-low";
  if(v < 100) return "mark-mid";
  return "mark-full";
}

function renderNav(){
  questionNav.innerHTML = "";
  questions.forEach((q,i)=>{
    const d = document.createElement("div");
    d.className = `q-circle ${markClass(q["Percentage"] || q["‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ %"])}`;
    d.innerText = q["‡§Ö. ‡§ï‡•ç‡§∞."];
    d.onclick = () => {
      current = i;
      showQuestion(i);
      highlightActive();
    };
    questionNav.appendChild(d);
  });
}

function showQuestion(i){
  const q = questions[i];
  photos = [];
  let imgHTML = "";

  for(let p=1;p<=5;p++){
    if(q[`photo${p}`]){
      photos.push(q[`photo${p}`]);
      imgHTML += `<img src="${q[`photo${p}`]}" onclick="openLB(${photos.length-1})">`;
    }
  }

  questionArea.innerHTML = `
  <div class="question-card">
    <b>‡§Ö. ‡§ï‡•ç‡§∞.:</b> ${q["‡§Ö. ‡§ï‡•ç‡§∞."]}<br><br>
    <b>‡§ï‡§æ‡§Æ‡§æ‡§ö‡•á ‡§§‡§™‡§∂‡•Ä‡§≤:</b> ${q["‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§ï‡§æ‡§≤‡§æ‡§µ‡§ß‡•Ä ‡§™‡§∞‡•ç‡§Ø‡§Ç‡§§ ‡§ï‡§∞‡§æ‡§µ‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§ï‡§æ‡§Æ‡§æ‡§ö‡•á ‡§§‡§™‡§∂‡•Ä‡§≤"]}<br><br>
    <b>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§µ‡§æ‡§π‡•Ä‡§ö‡•á ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™:</b> ${q["‡§ï‡§æ‡§∞‡•ç‡§Ø‡§µ‡§æ‡§π‡•Ä‡§ö‡•á ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™"] || ""}<br><br>
    <div class="proofs">${imgHTML}</div>
  </div>`;
}

function highlightActive(){
  document.querySelectorAll(".q-circle").forEach((c,i)=>{
    c.classList.toggle("active", i === current);
  });
}

/* LIGHTBOX */
function openLB(i){
  photoIndex = i;
  lbImg.src = photos[i];
  lightbox.style.display = "flex";
}
function closeLB(){ lightbox.style.display="none"; }
function nextPhoto(){
  photoIndex = (photoIndex+1)%photos.length;
  lbImg.src = photos[photoIndex];
}
function prevPhoto(){
  photoIndex = (photoIndex-1+photos.length)%photos.length;
  lbImg.src = photos[photoIndex];
}

/* LOAD CSV */
Papa.parse(sheetURL,{
  download:true,
  header:true,
  complete: r=>{
    questions = r.data.filter(q=>q["‡§Ö. ‡§ï‡•ç‡§∞."]);
    if(!questions.length){
      questionArea.innerHTML = "‚ùå Sheet ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§°‡•á‡§ü‡§æ ‡§®‡§æ‡§π‡•Ä";
      return;
    }
    renderNav();
    showQuestion(0);
    highlightActive();
  },
  error: err=>{
    questionArea.innerHTML = "‚ùå CSV Load Error";
    console.error(err);
  }
});

/* NAV BUTTONS */
nextBtn.onclick = ()=>{
  if(current < questions.length-1){
    current++;
    showQuestion(current);
    highlightActive();
  }
};
prevBtn.onclick = ()=>{
  if(current > 0){
    current--;
    showQuestion(current);
    highlightActive();
  }
};
</script>

</body>
</html>
