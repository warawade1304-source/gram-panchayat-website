<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рдкреНрд░рд╢реНрдирд╛рд╡рд▓реА | рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рд╡рд░рд╡рдбреЗ</title>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8;}
.top-header{text-align:center;padding:20px;font-size:26px;font-weight:bold;
background:linear-gradient(to right,#ff9933,#fff,#138808);}
.menu{display:flex;justify-content:center;flex-wrap:wrap;background:#003f7f;}
.menu a{color:#fff;padding:12px 16px;text-decoration:none;font-weight:bold;}
.container{max-width:1200px;margin:20px auto;background:#fff;padding:20px;border-radius:10px;}

.question-top-nav{display:flex;gap:6px;overflow-x:auto;padding:10px;background:#eef3ff;border-radius:8px;}
.q-circle{
  min-width:36px;height:36px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:bold;cursor:pointer;
  border:3px solid #999;
}
.q-circle.active{outline:3px solid #000;}

.mark-0{background:#dc2626;color:#fff;}
.mark-low{background:#f97316;color:#fff;}
.mark-mid{background:#facc15;color:#000;}
.mark-full{background:#16a34a;color:#fff;}

.question-card{border-left:5px solid #003f7f;background:#f9fafb;padding:15px;border-radius:8px;}

.proofs img{
  max-width:220px;
  margin:6px;
  border-radius:8px;
  cursor:pointer;
  transition:.2s;
}
.proofs img:hover{transform:scale(1.05);}

/* LIGHTBOX */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.lightbox img{max-width:90%;max-height:85%;border-radius:10px;}
.lb-btn{
  position:absolute;
  color:#fff;
  font-size:34px;
  cursor:pointer;
  user-select:none;
}
.lb-close{top:20px;right:30px;}
.lb-prev{left:20px;}
.lb-next{right:20px;}

.nav-btns{display:flex;justify-content:space-between;margin-top:15px;}
button{padding:10px 18px;border:none;background:#003f7f;color:#fff;border-radius:6px;}
</style>
</head>

<body>

<div class="top-header">ЁЯУД рдореБрдЦреНрдпрдордВрддреНрд░реА рд╕рдореГрджреНрдз рдкрдВрдЪрд╛рдпрддрд░рд╛рдЬ рдЕрднрд┐рдпрд╛рди рдкреНрд░рд╢реНрдирд╛рд╡рд▓реА - рд╡рд░рд╡рдбреЗ</div>

<div class="menu">
  <a href="index.html">рдореБрдЦреНрдп рдкрд╛рди</a>
  <a href="panch-info.html">рдкрдВрдЪрд╛рдпрддреАрдЪреА рдорд╛рд╣рд┐рддреА</a>
  <a href="documents.html">рд╢рд╛рд╕рдХреАрдп рдпреЛрдЬрдирд╛</a>
  <a href="notices.html">рдиреЛрдЯреАрд╕ рдмреЛрд░реНрдб</a>
  <a href="question.html">рдкреНрд░рд╢реНрди рд╕реВрдЪреА</a>
  <a href="gallery.html">рдлреЛрдЯреЛ рдЧреЕрд▓рд░реА</a>
  <a href="tax.html">рдорд╛рд▓рдорддреНрддрд╛ рдХрд░</a>
  <a href="contact.html">рд╕рдВрдкрд░реНрдХ</a>
</div>

<div class="container">
  <div id="questionNav" class="question-top-nav"></div>
  <div id="questionArea"></div>

  <div class="nav-btns">
    <button id="prevBtn">Previous</button>
    <button id="nextBtn">Next</button>
  </div>
</div>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox">
  <span class="lb-btn lb-close" onclick="closeLB()">тЬЦ</span>
  <span class="lb-btn lb-prev" onclick="prevPhoto()">тЭо</span>
  <img id="lbImg">
  <span class="lb-btn lb-next" onclick="nextPhoto()">тЭп</span>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

<script>
/* ===== CONFIG ===== */
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTcFT9M0fQK1TI1FgzTwUTTmK5CIsA7yK5zXPSoZ0SkjzGtuDmyKhvaXjPedNlnHy8zCWGRyNIwj7WU/pub?output=csv";

/* ===== DOM ===== */
const questionNav = document.getElementById("questionNav");
const questionArea = document.getElementById("questionArea");
const nextBtn = document.getElementById("nextBtn");
const prevBtn = document.getElementById("prevBtn");
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lbImg");

/* ===== DATA ===== */
let questions = [];
let current = 0;
let photos = [];
let photoIndex = 0;

/* ===== FUNCTIONS ===== */
function markClass(v){
  v = Number(v) || 0;
  if(v === 0) return "mark-0";
  if(v <= 50) return "mark-low";
  if(v < 100) return "mark-mid";
  return "mark-full";
}

function renderNav(){
  questionNav.innerHTML = "";
  questions.forEach((q,i)=>{
    const d = document.createElement("div");
    d.className = `q-circle ${markClass(q["Percentage"] || q["рдкреНрд░рд╛рдкреНрдд %"])}`;
    d.innerText = q["рдЕ. рдХреНрд░."];
    d.onclick = () => {
      current = i;
      showQuestion(i);
      highlightActive();
    };
    questionNav.appendChild(d);
  });
}

function showQuestion(i){
  const q = questions[i];
  photos = [];
  let imgHTML = "";

  for(let p=1;p<=5;p++){
    if(q[`photo${p}`]){
      photos.push(q[`photo${p}`]);
      imgHTML += `<img src="${q[`photo${p}`]}" onclick="openLB(${photos.length-1})">`;
    }
  }

  questionArea.innerHTML = `
  <div class="question-card">
  <div style="flex:1; background:#ffe0e0; padding:8px; text-align:center; border-radius:6px;"><b>рдПрдХреВрдг рдкреНрд░рд╛рдкреНрдд рдЧреБрдг:</b><br> ${q["Total Marks"] ||""}</div>
    <b>рдЕ. рдХреНрд░.:</b> ${q["рдЕ. рдХреНрд░."]}<br><br>
    <b>рдХрд╛рдорд╛рдЪреЗ рддрдкрд╢реАрд▓:</b> ${q["рдЕрднрд┐рдпрд╛рди рдХрд╛рд▓рд╛рд╡рдзреА рдкрд░реНрдпрдВрдд рдХрд░рд╛рд╡рдпрд╛рдЪреНрдпрд╛ рдХрд╛рдорд╛рдЪреЗ рддрдкрд╢реАрд▓"]}<br><br>
    <b>рдХрд╛рд░реНрдпрд╡рд╛рд╣реАрдЪреЗ рд╕реНрд╡рд░реВрдк:</b> ${q["рдХрд╛рд░реНрдпрд╡рд╛рд╣реАрдЪреЗ рд╕реНрд╡рд░реВрдк"] || ""}<br><br>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin:12px 0;"> <div style="flex:1;background:#d0e1ff;padding:8px;border-radius:6px;text-align:center;"><b>рдЧреБрдг</b><br>${q["рдЧреБрдг"]}</div>
    <div style="flex:1;background:#dff5d0;padding:8px;border-radius:6px;text-align:center;"><b>рдЙрджреНрджреАрд╖реНрдЯ</b><br>${q["рдЙрджреНрджреАрд╖реНрдЯ"]}</div>
    <div style="flex:1;background:#fff1d0;padding:8px;border-radius:6px;text-align:center;"><b>рд╕рд╛рдзреНрдп</b><br>${q["рд╕рд╛рдзреНрдп"]}</div>
    <div style="flex:1;background:#ffe0e0;padding:8px;border-radius:6px;text-align:center;"><b>рдкреНрд░рд╛рдкреНрдд рдЧреБрдг</b><br>${q["рдкреНрд░рд╛рдкреНрдд %"]}</div>
    <div style="flex:1;background:#E34234;padding:8px;border-radius:6px;text-align:center;"><b>Percentage:</b><br>${q["Percentage"] || q["рдкреНрд░рд╛рдкреНрдд %"]}%<br><br> </div> </div>
    <div class="proofs">${imgHTML}</div>
  </div>`;
}

function highlightActive(){
  document.querySelectorAll(".q-circle").forEach((c,i)=>{
    c.classList.toggle("active", i === current);
  });
}

/* LIGHTBOX */
function openLB(i){
  photoIndex = i;
  lbImg.src = photos[i];
  lightbox.style.display = "flex";
}
function closeLB(){ lightbox.style.display="none"; }
function nextPhoto(){
  photoIndex = (photoIndex+1)%photos.length;
  lbImg.src = photos[photoIndex];
}
function prevPhoto(){
  photoIndex = (photoIndex-1+photos.length)%photos.length;
  lbImg.src = photos[photoIndex];
}

/* LOAD CSV */
Papa.parse(sheetURL,{
  download:true,
  header:true,
  complete: r=>{
    questions = r.data.filter(q=>q["рдЕ. рдХреНрд░."]);
    if(!questions.length){
      questionArea.innerHTML = "тЭМ Sheet рдордзреНрдпреЗ рдбреЗрдЯрд╛ рдирд╛рд╣реА";
      return;
    }
    renderNav();
    showQuestion(0);
    highlightActive();
  },
  error: err=>{
    questionArea.innerHTML = "тЭМ CSV Load Error";
    console.error(err);
  }
});

/* NAV BUTTONS */
nextBtn.onclick = ()=>{
  if(current < questions.length-1){
    current++;
    showQuestion(current);
    highlightActive();
  }
};
prevBtn.onclick = ()=>{
  if(current > 0){
    current--;
    showQuestion(current);
    highlightActive();
  }
};
</script>

</body>
</html>
